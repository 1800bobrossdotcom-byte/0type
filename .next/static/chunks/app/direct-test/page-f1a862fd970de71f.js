(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{232:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(5155),r=n(2115),s=n(4346);let l={monoline:{size:4,thinning:0,smoothing:.5,streamline:.5,simulatePressure:!1},"brush-thick":{size:24,thinning:.7,smoothing:.3,streamline:.2,simulatePressure:!0},calligraphy:{size:12,thinning:.9,smoothing:.6,streamline:.5,start:{taper:80,cap:!0},end:{taper:100,cap:!0},simulatePressure:!0},marker:{size:16,thinning:.3,smoothing:.8,streamline:.7,simulatePressure:!0}},a=[[50,50,.4],[80,60,.5],[120,80,.7],[150,120,.9],[140,160,.8],[100,190,.6],[60,220,.7],[40,260,.9],[50,300,.8],[80,330,.6],[130,350,.4]];function o(){let e=(0,r.useRef)({}),[t,n]=(0,r.useState)([]),o=e=>{n(t=>[...t.slice(-20),e]),console.log(e)};return(0,r.useEffect)(()=>{o("\uD83D\uDE80 Direct test starting..."),Object.entries(l).forEach(t=>{let[n,i]=t,r=e.current[n];if(!r)return;let l=r.getContext("2d");if(!l)return;l.fillStyle="#0a0a0a",l.fillRect(0,0,200,400),o('\uD83D\uDCCD Getting stroke for "'.concat(n,'"')),o("   Options: size=".concat(i.size,", thinning=").concat(i.thinning));let c=(0,s.$4)(a,i);if(o("   Output: ".concat(c.length," outline points")),c.length<3)return void o("   ❌ Not enough points!");let h=1/0,u=-1/0,f=1/0,d=-1/0;c.forEach(e=>{let[t,n]=e;h=Math.min(h,t),u=Math.max(u,t),f=Math.min(f,n),d=Math.max(d,n)});let g=u-h,p=g*(d-f);o("   Dimensions: ".concat(g.toFixed(1)," x ").concat((d-f).toFixed(1),", area=").concat(p.toFixed(0)));let x=new Path2D(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.length<4)return"";let n=(e,t)=>(e+t)/2,i=e[0],r=e[1],s=e[2],l="M".concat(i[0].toFixed(2),",").concat(i[1].toFixed(2)," Q").concat(r[0].toFixed(2),",").concat(r[1].toFixed(2)," ").concat(n(r[0],s[0]).toFixed(2),",").concat(n(r[1],s[1]).toFixed(2)," T");for(let t=2;t<e.length-1;t++)i=e[t],r=e[t+1],l+="".concat(n(i[0],r[0]).toFixed(2),",").concat(n(i[1],r[1]).toFixed(2)," ");return t&&(l+="Z"),l}(c));l.fillStyle="#ffffff",l.fill(x),l.fillStyle="#666",l.font="10px monospace",l.fillText(n,10,390),l.fillText("".concat(c.length,"pts, w=").concat(g.toFixed(0)),10,378),o('   ✅ Rendered "'.concat(n,'"'))}),o("✅ All presets rendered")},[]),(0,i.jsxs)("div",{className:"min-h-screen bg-black text-white p-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"0TYPE Direct Test"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Testing perfect-freehand library directly - no abstraction layers"}),(0,i.jsx)("div",{className:"flex gap-4 mb-4",children:Object.keys(l).map(t=>(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("canvas",{ref:n=>{e.current[t]=n},width:200,height:400,className:"border border-gray-800"}),(0,i.jsx)("p",{className:"text-xs mt-1 text-gray-400",children:t})]},t))}),(0,i.jsxs)("div",{className:"bg-gray-900 p-4 rounded mt-4",children:[(0,i.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Expected Results:"}),(0,i.jsxs)("ul",{className:"text-sm space-y-1 text-gray-400",children:[(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"monoline"}),": Thin, uniform width, no variation"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"brush-thick"}),": VERY thick, pressure-variable, organic"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"calligraphy"}),": Tapered ends, swelling in middle"]}),(0,i.jsxs)("li",{children:["• ",(0,i.jsx)("strong",{children:"marker"}),": Medium thick, slight variation"]})]}),(0,i.jsxs)("p",{className:"mt-4 text-yellow-400 text-sm",children:["If all 4 canvases look IDENTICAL → pipeline is broken",(0,i.jsx)("br",{}),"If they look DIFFERENT → perfect-freehand works, issue is elsewhere"]})]}),(0,i.jsxs)("div",{className:"bg-gray-900 p-4 rounded mt-4 max-h-48 overflow-y-auto",children:[(0,i.jsx)("h3",{className:"text-xs font-mono text-gray-500 mb-2",children:"Console Log"}),t.map((e,t)=>(0,i.jsx)("div",{className:"text-xs font-mono text-gray-400",children:e},t))]})]})}},834:(e,t,n)=>{Promise.resolve().then(n.bind(n,232))},4346:(e,t,n)=>{"use strict";function i(e,t,n,r=e=>e){return e*r(.5-t*(.5-n))}function r(e,t){return[e[0]+t[0],e[1]+t[1]]}function s(e,t){return[e[0]-t[0],e[1]-t[1]]}function l(e,t){return[e[0]*t,e[1]*t]}function a(e){return[e[1],-e[0]]}function o(e,t){return e[0]*t[0]+e[1]*t[1]}function c(e,t){var n;return(n=s(e,t))[0]*n[0]+n[1]*n[1]}function h(e){var t;return t=Math.hypot(e[0],e[1]),[e[0]/t,e[1]/t]}function u(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],l=e[1]-t[1];return[s*r-l*i+t[0],s*i+l*r+t[1]]}function f(e,t,n){return r(e,l(s(t,e),n))}n.d(t,{$4:()=>x});var{min:d,PI:g}=Math,p=g+1e-4;function x(e,t={}){return function(e,t={}){var n,g;let{size:x=16,smoothing:m=.5,thinning:v=.5,simulatePressure:y=!0,easing:b=e=>e,start:j={},end:N={},last:k=!1}=t,{cap:M=!0,easing:F=e=>e*(2-e)}=j,{cap:w=!0,easing:E=e=>--e*e*e+1}=N;if(0===e.length||x<=0)return[];let D=e[e.length-1].runningLength,T=!1===j.taper?0:!0===j.taper?Math.max(x,D):j.taper,P=!1===N.taper?0:!0===N.taper?Math.max(x,D):N.taper,z=Math.pow(x*m,2),C=[],I=[],L=e.slice(0,10).reduce((e,t)=>{let n=t.pressure;if(y){let i=d(1,t.distance/x),r=d(1,1-i);n=d(1,e+.275*i*(r-e))}return(e+n)/2},e[0].pressure),O=i(x,v,e[e.length-1].pressure,b),R,_=e[0].vector,A=e[0].point,S=A,Y=A,$=S,G=!1;for(let t=0;t<e.length;t++){let{pressure:n}=e[t],{point:h,vector:g,distance:m,runningLength:j}=e[t];if(t<e.length-1&&D-j<3)continue;if(v){if(y){let e=d(1,m/x),t=d(1,1-e);n=d(1,L+.275*e*(t-L))}O=i(x,v,n,b)}else O=x/2;void 0===R&&(R=O),O=Math.max(.01,O*Math.min(j<T?F(j/T):1,D-j<P?E((D-j)/P):1));let N=(t<e.length-1?e[t+1]:e[t]).vector,k=t<e.length-1?o(g,N):1,M=0>o(g,_)&&!G,w=null!==k&&k<0;if(M||w){let e=l(a(_),O);for(let t=1/13,n=0;n<=1;n+=t)Y=u(s(h,e),h,p*n),C.push(Y),$=u(r(h,e),h,-(p*n)),I.push($);A=Y,S=$,w&&(G=!0);continue}if(G=!1,t===e.length-1){let e=l(a(g),O);C.push(s(h,e)),I.push(r(h,e));continue}let Q=l(a(f(N,g,k)),O);Y=s(h,Q),(t<=1||c(A,Y)>z)&&(C.push(Y),A=Y),$=r(h,Q),(t<=1||c(S,$)>z)&&(I.push($),S=$),L=n,_=g}let Q=e[0].point.slice(0,2),V=e.length>1?e[e.length-1].point.slice(0,2):r(e[0].point,[1,1]),Z=[],q=[];if(1===e.length){if(!(T||P)||k){let e=(n=h(a(s(Q,V))),r(Q,l(n,-(R||O)))),t=[];for(let n=1/13,i=n;i<=1;i+=n)t.push(u(e,Q,2*p*i));return t}}else{if(!(T||P&&1===e.length))if(M)for(let e=1/13,t=e;t<=1;t+=e){let e=u(I[0],Q,p*t);Z.push(e)}else{let e=s(C[0],I[0]),t=l(e,.5),n=l(e,.51);Z.push(s(Q,t),s(Q,n),r(Q,n),r(Q,t))}let t=a([-(g=e[e.length-1].vector)[0],-g[1]]);if(P||T&&1===e.length)q.push(V);else if(w){let e=r(V,l(t,O));for(let t=1/29,n=t;n<1;n+=t)q.push(u(e,V,3*p*n))}else q.push(r(V,l(t,O)),r(V,l(t,.99*O)),s(V,l(t,.99*O)),s(V,l(t,O)))}return C.concat(q,I.reverse(),Z)}(function(e,t={}){var n,i,l;let{streamline:a=.5,size:o=16,last:c=!1}=t;if(0===e.length)return[];let u=.15+(1-a)*.85,d=Array.isArray(e[0])?e:e.map(({x:e,y:t,pressure:n=.5})=>[e,t,n]);if(2===d.length){let e=d[1];d=d.slice(0,-1);for(let t=1;t<5;t++)d.push(f(d[0],e,t/4))}1===d.length&&(d=[...d,[...r(d[0],[1,1]),...d[0].slice(2)]]);let g=[{point:[d[0][0],d[0][1]],pressure:d[0][2]>=0?d[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],p=!1,x=0,m=g[0],v=d.length-1;for(let e=1;e<d.length;e++){let t=c&&e===v?d[e].slice(0,2):f(m.point,d[e],u);if(i=m.point,i[0]===t[0]&&i[1]===t[1])continue;let n=(l=m.point,Math.hypot(t[1]-l[1],t[0]-l[0]));if(x+=n,e<v&&!p){if(x<o)continue;p=!0}m={point:t,pressure:d[e][2]>=0?d[e][2]:.5,vector:h(s(m.point,t)),distance:n,runningLength:x},g.push(m)}return g[0].vector=(null==(n=g[1])?void 0:n.vector)||[0,0],g}(e,t),t)}}},e=>{e.O(0,[441,255,358],()=>e(e.s=834)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{5572:(e,t,s)=>{Promise.resolve().then(s.bind(s,7154))},7154:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var l=s(5155),n=s(2115),i=s(4346),r=s(4317);let a={A:{name:"A - Apex",strokes:[[150,350,250,50],[250,50,350,350],[175,230,325,230]]},O:{name:"O - Bowl",strokes:[[250,50,350,50,400,150,400,200,400,300,300,350,250,350,150,350,100,250,100,200,100,100,200,50,250,50]]},H:{name:"H - Stems",strokes:[[150,50,150,350],[350,50,350,350],[150,200,350,200]]},S:{name:"S - Curves",strokes:[[320,80,380,100,380,150,320,200,250,200,180,200,120,250,120,300,180,350,250,350]]}};function o(){var e,t,s,o,c,d;let h=(0,n.useRef)(null),[x,m]=(0,n.useState)("A"),[f,u]=(0,n.useState)("swiss-mono"),[p,v]=(0,n.useState)(!0),[g,b]=(0,n.useState)({size:12,thinning:.5,smoothing:.5,streamline:.5,simulatePressure:!0}),j=(0,n.useCallback)(function(e,t,s){var l,n,a,o,c,d;let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",m=[];if(4===t.length){let[e,s,l,n]=t;for(let t=0;t<=30;t++){let i=t/30,r=e+(l-e)*i+h,a=s+(n-s)*i,o=.3+.7*Math.sin(i*Math.PI);m.push([r,a,o])}}else for(let e=0;e<t.length-1;e+=2){let s=t[e]+h,l=t[e+1],n=.4+.6*Math.sin(e/(t.length-2)*Math.PI);m.push([s,l,n])}let f=r.sc[s],u=(null==f?void 0:f.style)||{},p=(0,i.$4)(m,{size:u.size||12,thinning:null!=(l=u.thinning)?l:.5,smoothing:null!=(n=u.smoothing)?n:.5,streamline:null!=(a=u.streamline)?a:.5,simulatePressure:null==(o=u.simulatePressure)||o,start:{taper:u.taperStart||0,cap:null==(c=u.capStart)||c},end:{taper:u.taperEnd||0,cap:null==(d=u.capEnd)||d}});if(p.length<3)return;let v=new Path2D(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.length<4)return"";let s=(e,t)=>(e+t)/2,l=e[0],n=e[1],i=e[2],r="M".concat(l[0].toFixed(2),",").concat(l[1].toFixed(2)," Q").concat(n[0].toFixed(2),",").concat(n[1].toFixed(2)," ").concat(s(n[0],i[0]).toFixed(2),",").concat(s(n[1],i[1]).toFixed(2)," T");for(let t=2,i=e.length-1;t<i;t++)l=e[t],n=e[t+1],r+="".concat(s(l[0],n[0]).toFixed(2),",").concat(s(l[1],n[1]).toFixed(2)," ");return t&&(r+="Z"),r}(p));e.fillStyle=x,e.fill(v)},[]),N=(0,n.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#666666";if(e.strokeStyle=l,e.lineWidth=12,e.lineCap="round",e.lineJoin="round",e.beginPath(),4===t.length)e.moveTo(t[0]+s,t[1]),e.lineTo(t[2]+s,t[3]);else{e.moveTo(t[0]+s,t[1]);for(let l=2;l<t.length;l+=2)e.lineTo(t[l]+s,t[l+1])}e.stroke()},[]);return(0,n.useEffect)(()=>{let e=h.current;if(!e)return;let t=e.getContext("2d");if(!t)return;t.fillStyle="#0a0a0a",t.fillRect(0,0,e.width,e.height),t.strokeStyle="#151515",t.lineWidth=1;for(let s=0;s<e.width;s+=50)t.beginPath(),t.moveTo(s,0),t.lineTo(s,e.height),t.stroke();for(let s=0;s<e.height;s+=50)t.beginPath(),t.moveTo(0,s),t.lineTo(e.width,s),t.stroke();let s=a[x];if(s){if(p)for(let l of(t.fillStyle="#444",t.font="12px monospace",t.fillText("OLD RENDERER",100,30),t.fillText("PERFECT-FREEHAND: "+f,450,30),t.strokeStyle="#222",t.lineWidth=2,t.beginPath(),t.moveTo(400,0),t.lineTo(400,e.height),t.stroke(),s.strokes))N(t,l,-150,"#555555"),j(t,l,f,150,"#ffffff");else for(let e of s.strokes)j(t,e,f,0,"#ffffff");t.fillStyle="#666",t.font="14px monospace",t.fillText(s.name,20,e.height-20)}},[x,f,p,j,N]),(0,l.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-6",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("header",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-mono mb-2",children:"\uD83D\uDD2C Stroke Test Lab"}),(0,l.jsx)("p",{className:"text-sm text-[#666]",children:"Visual comparison: Old renderer vs Perfect-Freehand with different presets"})]}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-3",children:[(0,l.jsx)("div",{className:"border border-[#222] overflow-hidden",children:(0,l.jsx)("canvas",{ref:h,width:800,height:500,className:"w-full"})}),(0,l.jsx)("div",{className:"flex gap-2 mt-4",children:Object.keys(a).map(e=>(0,l.jsx)("button",{onClick:()=>m(e),className:"w-12 h-12 text-xl font-bold border ".concat(x===e?"bg-white text-black border-white":"border-[#333] text-[#666] hover:border-[#555]"),children:e},e))})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"border border-[#222] p-4",children:(0,l.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:p,onChange:e=>v(e.target.checked),className:"w-4 h-4"}),(0,l.jsx)("span",{className:"text-sm",children:"Split Comparison View"})]})}),(0,l.jsxs)("div",{className:"border border-[#222]",children:[(0,l.jsx)("div",{className:"px-4 py-2 border-b border-[#222]",children:(0,l.jsx)("span",{className:"text-xs font-mono text-[#555]",children:"STROKE PRESETS"})}),(0,l.jsx)("div",{className:"max-h-64 overflow-y-auto p-2 space-y-1",children:Object.entries(r.sc).map(e=>{let[t,s]=e;return(0,l.jsxs)("button",{onClick:()=>u(t),className:"w-full text-left p-2 rounded text-xs transition-all ".concat(f===t?"bg-white text-black":"hover:bg-[#111] text-[#888]"),children:[(0,l.jsx)("div",{className:"font-medium",children:s.name}),(0,l.jsx)("div",{className:"text-[10px] ".concat(f===t?"text-[#666]":"text-[#555]"),children:s.category})]},t)})})]}),r.sc[f]&&(0,l.jsxs)("div",{className:"border border-[#222] p-4 text-xs",children:[(0,l.jsx)("div",{className:"text-[#555] mb-2",children:"CURRENT SETTINGS"}),(0,l.jsxs)("div",{className:"space-y-1 font-mono text-[#888]",children:[(0,l.jsxs)("div",{children:["size: ",r.sc[f].style.size||12]}),(0,l.jsxs)("div",{children:["thinning: ",null!=(o=r.sc[f].style.thinning)?o:.5]}),(0,l.jsxs)("div",{children:["smoothing: ",null!=(c=r.sc[f].style.smoothing)?c:.5]}),(0,l.jsxs)("div",{children:["streamline: ",null!=(d=r.sc[f].style.streamline)?d:.5]}),(0,l.jsxs)("div",{children:["taperStart: ",r.sc[f].style.taperStart||0]}),(0,l.jsxs)("div",{children:["taperEnd: ",r.sc[f].style.taperEnd||0]}),(0,l.jsxs)("div",{children:["pressure: ",r.sc[f].style.simulatePressure?"simulated":"uniform"]})]}),(0,l.jsxs)("div",{className:"mt-3 text-[#444]",children:["← ",null==(e=r.sc[f].influences)?void 0:e.join(" • ")]})]}),(0,l.jsxs)("div",{className:"border border-[#222] p-4 text-xs font-mono",children:[(0,l.jsx)("div",{className:"text-[#555] mb-2",children:"DEBUG"}),(0,l.jsxs)("div",{className:"text-[#666]",children:["Letter: ",x,(0,l.jsx)("br",{}),"Strokes: ",(null==(t=a[x])?void 0:t.strokes.length)||0,(0,l.jsx)("br",{}),"Preset: ",f,(0,l.jsx)("br",{}),"Mode: ",(null==(s=r.sc[f])?void 0:s.style.mode)||"hybrid"]})]})]})]})]})})}}},e=>{e.O(0,[317,441,255,358],()=>e(e.s=5572)),_N_E=e.O()}]);